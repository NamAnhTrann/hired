<!-- ========== HEADER ========== -->
<header
  [ngClass]="{
    'min-h-20': !isShrunk,
    'min-h-16': isShrunk,
  }"
  class="fixed top-0 left-0 w-full z-50 backdrop-blur-lg bg-white/80 dark:bg-neutral-900/80 border-b border-gray-200/50 dark:border-neutral-700/50 transition-all duration-300 flex items-center"
>
  <nav
    class="relative max-w-7xl w-full flex flex-wrap lg:grid lg:grid-cols-12 basis-full items-center px-4 md:px-6 lg:px-8 mx-auto"
  >
    <!-- Logo -->
    <div class="lg:col-span-3 flex items-center">
      <a
        routerLink="/"
        class="flex-none rounded-xl text-xl inline-block font-semibold focus:outline-hidden focus:opacity-80"
      >
        Doohickey
      </a>
    </div>

    <!-- Sign-in + Mobile Toggle -->
    <div
      class="flex items-center gap-x-3 lg:gap-x-2 ms-auto py-1 lg:ps-6 lg:order-3 lg:col-span-3"
    >
      @if (auth.user$ | async; as user) {
        <!-- USER IS LOGGED IN → Show Logout -->
        <button
          (click)="logout()"
          class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-red-600 text-white hover:bg-red-500 transition"
        >
          Logout
          <i class="fa-solid fa-right-from-bracket"></i>
        </button>
      } @else {
        <!-- USER NOT LOGGED IN → Show Login -->
        <a
          routerLink="/login-page"
          class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 transition"
        >
          Login
          <i class="fa-solid fa-right-to-bracket"></i>
        </a>
      }
      <a
        routerLink="/cart-page"
        class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 transition"
      >
        Cart
        <i class="fa-solid fa-cart-shopping"></i>
      </a>

      <!-- Mobile menu button -->
      <div class="lg:hidden">
        <button
          type="button"
          (click)="toggleMenu()"
          aria-label="Toggle navigation"
          class="w-11 h-11 flex items-center justify-center rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-neutral-700 active:scale-95 transition shadow-sm"
        >
          @if (!isMenuOpen) {
            <i class="fa-solid fa-bars text-lg"></i>
          } @else {
            <i class="fa-solid fa-xmark text-lg"></i>
          }
        </button>
      </div>
    </div>

    <!-- Nav Links -->
    <!-- Mobile / Tablet Menu -->
    <div
      id="mobile-menu"
      class="overflow-hidden transition-all duration-300 basis-full grow lg:block lg:w-auto lg:basis-auto lg:order-2 lg:col-span-6 absolute lg:static top-full left-0 w-full bg-white lg:bg-transparent dark:bg-neutral-900 dark:lg:bg-transparent border-t lg:border-0 border-gray-200 dark:border-neutral-700 shadow-xl lg:shadow-none z-40"
      [class.hidden]="!isMenuOpen"
    >
      <div
        class="mobile-nav px-4 pb-6 pt-4 flex flex-col gap-y-3 lg:px-0 lg:pb-0 lg:pt-0 lg:flex-row lg:justify-center lg:items-center lg:gap-x-7 lg:mt-0 "
      >
        <!-- Listings -->
        <a
          routerLink="/marketplace-page"
          routerLinkActive="active-link"
          class="nav-link text-black dark:text-white"
        >
          Marketplace
        </a>

        <!-- Product -->

        @if (auth.isLoggedIn()) {
          <a
            routerLink="/dashboard-page"
            routerLinkActive="active-link"
            class="nav-link text-black dark:text-white"
          >
            Dashboard
          </a>
        }

        <a
          routerLink="/pre-checkout-page"
          routerLinkActive="active-link"
          class="nav-link text-black dark:text-white"
        >
          Checkout Test
        </a>

        <a
          routerLink="/seller-store-page"
          routerLinkActive="active-link"
          class="nav-link text-black dark:text-white"
        >
          Seller Test
        </a>
      </div>
    </div>
  </nav>
</header>
<!-- ========== END HEADER ========== -->
